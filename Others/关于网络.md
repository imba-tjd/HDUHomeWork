# 关于网络

联通的均不清楚。

## 宿舍有线宽带

现在两者均支持ipv6，可以获取到公网地址；移动还要保证你自己用的路由器支持。

### 移动

* 晚上访问国外网站速度爆炸慢，主动QoS丢包；路由也会莫名其妙地断掉，一段时间后恢复
* 53端口主动DNS spoofing，即使查询的是未被墙的网址，甚至是国内的网址

我用的是移动。下面说说优点：

* 人工客服更好（公认的）
* 可以用路由器
* 虽然ipv4不是公网地址，但是检测出来的NAT类型为Full Cone，要不就是上游路由器全都启用了UPnP

### 电信

* 宽带密码是变动的，需要发短信获取密码
* 需要装闪讯/netkeeper客户端，此软件可能导致Windows的网络栈出奇怪的问题，而且Linux和Mac os没有
* 好像可以申请固定密码，但是这个密码仍不是真实密码，还是只有闪讯能用

以上三点决定了电信无法使用路由器。下面说说优点：

* 本地连接与校园网iHUD处在同一局域网内，可以直接访问校园网内网地址，抢课速度也快
* 访问国外网站相对更快

## 无线宽带

### 教学区

* iHDU：WEB验证用学号免费连上，速度不定，用的人少的时候还可以，但一般也就几百KB。六教的信号极差
* CMCC-EDU：速度仍是几百KB，且DHCP发现极慢
* CMCC-WEB：连不上的，没账号，移动给的EDU的账号
* ChinaNet：电信的，因为我不用所以不知道

### 宿舍区

* ChinaNet：同上
* CMCC-EDU：能搜到但是连上之后信号为一格，可以认为没有
* ChinaNet-xxxx：其中xxxx为四位随机字母。是每个寝室里的电信的路由器，信号好，但是该认证还是要认证。该路由器仅启用的是交换机模式，虽然可以进超级管理员界面改但还是没得电信宽带的密码

## 登录内网

电信可以直接登，之前说过了。

移动打开`http://pwd.hdu.edu.cn/vpn.aspx`，申请密码。还要下载一个EasyConnect，不清楚Windows自带的可不可以。所以推荐在虚拟机里装。之后就可以访问了。

查询创新学分：`http://192.168.101.210/aexp/`

## 解决NetKeeper（闪讯）导致网络图标消失

把下面的代码复制粘贴到文本文档，后缀改为.reg，运行，重启。

```reg
Windows Registry Editor Version 5.00

[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\EventLog]
"ServiceDll"=hex(2):25,00,53,00,79,00,73,00,74,00,65,00,6d,00,52,00,6f,00,6f,\
00,74,00,25,00,5c,00,53,00,79,00,73,00,74,00,65,00,6d,00,33,00,32,00,5c,00,\
77,00,65,00,76,00,74,00,73,00,76,00,63,00,2e,00,64,00,6c,00,6c,00,00,00
```

来自：http://tieba.baidu.com/p/5998182607?cid=#124396794840l

## 编程登录

试图在疫情防控平台自动签到。发现HTTP头中需要包含：timestamp、sign、Authorization和含有sso_token的cookie。

其中timestamp可用`$(date +%s)"000"`取得。

sign是signString的MD5结果。signString为`"$app_secret$path$timestamp $app_secret"`，path只是URL的一部分，从`api`开始，如果url中有参数还需要在`$path`后直接以`$key$value`的形式拼接起来;app_key和app_secret都要在具体的应用中看。此算法在`custom.js`中。

Authorization是从local Storage中取得的，不知道是怎么生成的，非常长。也因此自动签到失败。
